/* --- GLOBAL STYLES & THEME VARIABLES --- */
:root {
  /* These are placeholder defaults; they will be overridden by theme classes on the body */
  --bg-color: #1a2e29;
  --text-color: #f0ead6;
  --text-muted-color: #a39f8e;
  --primary-accent-color: #f59e0b;
  --primary-accent-text-color: #1f2937;
  --secondary-accent-color: #0d9488;
  --border-color: #444b49;
  --panel-bg-color: rgba(12, 10, 9, 0.65);
  --panel-border-color: rgba(245, 158, 11, 0.25);
  --button-primary-bg: #f59e0b;
  --button-primary-hover-bg: #facc15;
  --button-primary-border: #b45309;
  --primary-glow-color: rgba(245, 158, 11, 0.3);
  --input-focus-ring-color: #f59e0b;
  --bg-subtle: rgba(12, 10, 9, 0.8);
  --bg-interactive: rgba(28, 25, 23, 0.7);
  --bg-interactive-hover: rgba(55, 48, 42, 0.7);
  --border-subtle: rgba(107, 114, 128, 0.4);
  --player-bubble-bg-color: rgb(55 65 81 / 0.8);
  --npc-bubble-bg-color: rgb(31 41 55 / 0.6);
  --glass-bg-color: rgba(0, 0, 0, 0.3);
}

body {
  font-family: 'Noto Serif', serif;
  background-color: var(--bg-color);
  color: var(--text-color);
  transition: background-color 0.5s ease;
}

* {
  box-sizing: border-box;
}

/* Custom Scrollbar */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: rgba(0,0,0,0.2); border-radius: 10px; }
::-webkit-scrollbar-thumb { background: var(--border-subtle); border-radius: 10px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-muted-color); }

/* --- FONT & TEXT STYLES --- */
.font-title { font-family: 'ZCOOL XiaoWei', serif; }
.font-calligraphy { font-family: 'Ma Shan Zheng', cursive; }

.main-menu-title {
  font-size: clamp(4.5rem, 18vw, 11rem);
  line-height: 0.9;
  font-weight: 700;
  font-family: 'Ma Shan Zheng', cursive;
  text-shadow: 2px 4px 8px rgba(0, 0, 0, 0.5);
  -webkit-text-stroke: 1px rgba(255, 255, 255, 0.1);
}
.animated-gradient-text {
  background: linear-gradient(135deg, #f59e0b, #fde047, #a3e635, #4ade80, #2dd4bf, #38bdf8, #8b5cf6, #e11d48, #facc15, #f59e0b);
  background-size: 500% 500%;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: gradient-animation 25s ease infinite;
}
@keyframes gradient-animation {
  0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; }
}

/* --- DYNAMIC BACKGROUNDS --- */
.dynamic-bg-container { position: fixed; inset: 0; z-index: -10; overflow: hidden; background-color: var(--bg-color); }
.dynamic-bg-layer { position: absolute; inset: 0; background-repeat: repeat-x; background-position: center bottom; will-change: transform; }
.dynamic-bg-ink_wash .layer-1 { background-image: url('https://i.imgur.com/gHFj1cr.png'); animation: parallax-slow 180s linear infinite; background-size: auto 100%; }
.dynamic-bg-ink_wash .layer-2 { background-image: url('https://i.imgur.com/qF1y348.png'); animation: parallax-medium 120s linear infinite; background-size: auto 100%; }
.dynamic-bg-ink_wash .layer-3 { background-image: url('https://i.imgur.com/Bf1oD5p.png'); animation: parallax-fast 80s linear infinite; background-size: auto 100%; }
.dynamic-bg-ink_wash .layer-4 { background-image: url('https://i.imgur.com/o4S3a2w.png'); animation: parallax-very-fast 50s linear infinite; background-size: auto 100%; }
.dynamic-bg-sunset_peak .layer-1 { background-image: url('https://i.imgur.com/0fFXx6L.png'); animation: parallax-slow 240s linear infinite; background-size: auto 100%; }
.dynamic-bg-sunset_peak .layer-2 { background-image: url('https://i.imgur.com/s6k41eX.png'); animation: parallax-medium 180s linear infinite; background-size: auto 100%; }
.dynamic-bg-sunset_peak .layer-3 { background-image: url('https://i.imgur.com/yFzN8D4.png'); animation: parallax-fast 120s linear infinite; background-size: auto 100%; }
.dynamic-bg-sunset_peak .layer-4 { background-image: url('https://i.imgur.com/1G606s3.png'); animation: parallax-very-fast 80s linear infinite; background-size: auto 100%; }
.dynamic-bg-mystic_violet .layer-1 { background-image: url('https://i.imgur.com/qEGGk7P.png'); animation: parallax-slow 200s linear infinite; background-size: auto 100%; }
.dynamic-bg-mystic_violet .layer-2 { background-image: url('https://i.imgur.com/Q2yG3pP.png'); animation: parallax-medium 150s linear infinite; background-size: auto 100%; }
.dynamic-bg-mystic_violet .layer-3 { background-image: url('https://i.imgur.com/lM8W3lP.png'); animation: parallax-fast 100s linear infinite; background-size: auto 100%; }
.dynamic-bg-mystic_violet .layer-4 { background-image: url('https://i.imgur.com/pZzN5Yl.png'); animation: parallax-very-fast 60s linear infinite; background-size: auto 100%; }

.bg-thumbnail-ink_wash { background-image: url('https://i.imgur.com/mO2rYfA.jpg'); background-size: cover; }
.bg-thumbnail-sunset_peak { background-image: url('https://i.imgur.com/1Dq2a7e.jpg'); background-size: cover; }
.bg-thumbnail-mystic_violet { background-image: url('https://i.imgur.com/4l3zO6I.jpg'); background-size: cover; }
.bg-thumbnail-blood_moon { background-image: url('https://i.imgur.com/gK9q3jR.jpg'); background-size: cover; }
.bg-thumbnail-jade_forest { background-image: url('https://i.imgur.com/2s4R5yO.jpg'); background-size: cover; }

@keyframes parallax-slow { 0% { transform: translateX(0); } 100% { transform: translateX(-1920px); } }
@keyframes parallax-medium { 0% { transform: translateX(0); } 100% { transform: translateX(-1920px); } }
@keyframes parallax-fast { 0% { transform: translateX(0); } 100% { transform: translateX(-1920px); } }
@keyframes parallax-very-fast { 0% { transform: translateX(0); } 100% { transform: translateX(-1920px); } }

/* --- AMBIENT/PARTICLE EFFECTS --- */
.particle-container { position: fixed; inset: 0; z-index: -5; pointer-events: none; }
.particle { position: absolute; background-color: rgba(245, 158, 11, 0.4); border-radius: 50%; animation: float-particle linear infinite; box-shadow: 0 0 5px var(--primary-glow-color); }
@keyframes float-particle { 0% { transform: translateY(100vh) scale(0); opacity: 0; } 10%, 90% { opacity: 1; } 100% { transform: translateY(-10vh) scale(1); opacity: 0; } }

/* --- WEATHER EFFECTS --- */
.weather-overlay { position: fixed; inset: 0; z-index: -1; pointer-events: none; opacity: 0; transition: opacity 1s ease-in-out; }
.weather-overlay.active { opacity: 1; }
.rain-container { position: absolute; inset: 0; overflow: hidden; }
.raindrop { position: absolute; bottom: 100%; width: 1.5px; background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(255,255,255,0.4) 100%); animation: fall linear infinite; }
@keyframes fall { to { transform: translateY(110vh); } }
.storm-flash { position: absolute; inset: 0; background-color: rgba(200, 200, 255, 0.6); opacity: 0; animation: storm-flash-anim 10s infinite; animation-delay: 2s; }
@keyframes storm-flash-anim { 0%, 100% { opacity: 0; } 1%, 5%, 8% { opacity: 1; } 1.5%, 5.5%, 8.5% { opacity: 0; } }
.snow-container { position: absolute; inset: 0; overflow: hidden; }
.snowflake { position: absolute; top: -10px; background-color: #fff; border-radius: 50%; animation: snowfall linear infinite; }
@keyframes snowfall { 0% { transform: translateY(0) translateX(0); } 100% { transform: translateY(105vh) translateX(var(--sway-x)); } }

/* --- KEYFRAME ANIMATIONS (keep these) --- */
@keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
@keyframes fade-in-menu { from { opacity: 0; } to { opacity: 1; } }
@keyframes menu-item-appear { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes stat-flash { 0%, 100% { background-color: transparent; } 50% { background-color: var(--primary-glow-color); } }
@keyframes fade-in-fast { from { opacity: 0; } to { opacity: 1; } }
@keyframes fade-in-special { from { opacity: 0; } to { opacity: 1; } }
@keyframes breakthrough-pulse { 0%, 100% { transform: scale(0.8); opacity: 0.7; } 50% { transform: scale(1.2); opacity: 1; } }
@keyframes breakthrough-zoom { from { transform: rotate(var(--angle)) scaleY(0) translateY(100px); opacity: 0; } to { transform: rotate(var(--angle)) scaleY(1) translateY(0); opacity: 1; } }
@keyframes text-glow-reveal { from { opacity: 0; text-shadow: 0 0 5px #fef9c3; transform: scale(0.8); } to { opacity: 1; text-shadow: 0 0 15px #fef9c3, 0 0 30px #fde047; transform: scale(1); } }
@keyframes rare-item-pulse { 0%, 100% { transform: scale(0.9); opacity: 0.8; } 50% { transform: scale(1.1); opacity: 1; } }
@keyframes rare-item-spin { to { transform: rotate(360deg); } }
@keyframes card-intro-drop { from { transform: translateY(-100vh) rotateX(-90deg); } to { transform: translateY(0) rotateX(0deg); } }
@keyframes card-flip { 0% { transform: rotateY(0deg); } 100% { transform: rotateY(180deg); } }
@keyframes text-fade-in-up { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

/* --- Remaining valid CSS --- */
.writing-vertical {
  writing-mode: vertical-rl;
  text-orientation: mixed;
  transform: rotate(180deg);
  position: absolute;
  top: 1rem;
  left: 1rem;
  height: calc(100% - 2rem);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.stat-changed-flash { animation: stat-flash 0.7s ease-out; }

/* --- GLOBAL ELEMENT STYLES FOR CONSISTENCY --- */
select {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
  background-position: right 0.5rem center;
  background-size: 1.5em 1.5em;
  background-repeat: no-repeat;
}

input[type="color"]::-webkit-color-swatch-wrapper {
    padding: 0;
}
input[type="color"]::-webkit-color-swatch {
    border-radius: 0.375rem; /* .rounded-md */
    border: none;
}
